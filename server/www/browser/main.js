import{a as se}from"./chunk-Z354AGUN.js";import{a as oe}from"./chunk-2AT3FX7A.js";import{$ as re,Ga as ne,W as ee,X as te,i as M,j as q,l as Y,o as J,p as Q,q as X,ua as ie}from"./chunk-SHX6CIJO.js";import{B as u,C as F,I as U,Ja as H,L as b,Mb as _,N as W,R as w,Sa as K,U as L,Ua as A,W as g,X as V,Y as B,bb as Z,cb as $,db as G,e as R,ha as x,i as D,j as C,k as N,ka as z,n as l,r as j,s as I,ta as P,u as T,v as O,w as d,x as v}from"./chunk-DMKK32ZK.js";import"./chunk-Z27GUSSL.js";import"./chunk-7KGURMOZ.js";import"./chunk-IPDSYFFT.js";import"./chunk-RJYTLPPS.js";import"./chunk-VJIVQHDH.js";import"./chunk-ZKRXQTCG.js";import"./chunk-G3CV3VGG.js";import"./chunk-JX3TYZ34.js";import"./chunk-RUY5SX76.js";import"./chunk-NIOQNOHM.js";import"./chunk-4U6PRYVA.js";import"./chunk-IL4VJRLA.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{a as k,e as m,f as S}from"./chunk-RW4GY4BD.js";var ae=[{path:"home",loadComponent:()=>import("./chunk-EFDKDYVL.js").then(t=>t.HomePage)},{path:"",redirectTo:"home",pathMatch:"full"},{path:"calendar",loadComponent:()=>import("./chunk-NLWFOMQM.js").then(t=>t.CalendarPage)},{path:"settings",loadComponent:()=>import("./chunk-KPVQONUU.js").then(t=>t.SettingsPage)},{path:"history",loadComponent:()=>import("./chunk-KW7OWYRK.js").then(t=>t.HistoryPage)},{path:"timer",loadComponent:()=>import("./chunk-YRPFPT4U.js").then(t=>t.TimerPage)},{path:"weekly-report",loadComponent:()=>import("./chunk-2RRJMRVY.js").then(t=>t.WeeklyReportPage)},{path:"history-solo",loadComponent:()=>import("./chunk-ECIHH3OU.js").then(t=>t.HistorySoloPage)},{path:"register",loadComponent:()=>import("./chunk-MDQFKNHX.js").then(t=>t.RegisterPage)}];var pe=(()=>{let e=class e{constructor(r,i){this.authService=r,this.babyService=i}initialize(){return S(this,null,function*(){if((yield this.authService.checkAuthentication())&&(yield this.babyService.refresh(),!this.babyService.activeBaby())){let n=`Baby ${(yield ne.getId()).identifier.slice(0,4)}`;yield this.babyService.makeBaby(n)}})}};e.\u0275fac=function(i){return new(i||e)(g(se),g(oe))},e.\u0275prov=w({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var le=(()=>{let e=class e{constructor(){this.initService=V(pe),this.initialize()}initialize(){return S(this,null,function*(){yield this.initService.initialize()})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=H({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(i,n){i&1&&(Z(0,"ion-app"),G(1,"ion-router-outlet"),$())},dependencies:[re,te],encapsulation:2});let t=e;return t})();var E="Service workers are disabled or not supported by this browser";function ge(t){return I(()=>N(new Error(t)))}var f=class{serviceWorker;worker;registration;events;constructor(e){if(this.serviceWorker=e,!e)this.worker=this.events=this.registration=ge(E);else{let r=T(e,"controllerchange").pipe(l(()=>e.controller)),i=I(()=>C(e.controller)),n=j(i,r);this.worker=n.pipe(v(h=>!!h)),this.registration=this.worker.pipe(b(()=>e.getRegistration()));let c=T(e,"message").pipe(l(h=>h.data)).pipe(v(h=>h&&h.type)).pipe(U());c.connect(),this.events=c}}postMessage(e,o){return this.worker.pipe(u(1),W(r=>{r.postMessage(k({action:e},o))})).toPromise().then(()=>{})}postMessageWithOperation(e,o,r){let i=this.waitForOperationCompleted(r),n=this.postMessage(e,o);return Promise.all([n,i]).then(([,a])=>a)}generateNonce(){return Math.round(Math.random()*1e7)}eventsOfType(e){let o;return typeof e=="string"?o=r=>r.type===e:o=r=>e.includes(r.type),this.events.pipe(v(o))}nextEventOfType(e){return this.eventsOfType(e).pipe(u(1))}waitForOperationCompleted(e){return this.eventsOfType("OPERATION_COMPLETED").pipe(v(o=>o.nonce===e),u(1),l(o=>{if(o.result!==void 0)return o.result;throw new Error(o.error)})).toPromise()}get isEnabled(){return!!this.serviceWorker}},fe=(()=>{let e=class e{sw;messages;notificationClicks;subscription;get isEnabled(){return this.sw.isEnabled}pushManager=null;subscriptionChanges=new R;constructor(r){if(this.sw=r,!r.isEnabled){this.messages=d,this.notificationClicks=d,this.subscription=d;return}this.messages=this.sw.eventsOfType("PUSH").pipe(l(n=>n.data)),this.notificationClicks=this.sw.eventsOfType("NOTIFICATION_CLICK").pipe(l(n=>n.data)),this.pushManager=this.sw.registration.pipe(l(n=>n.pushManager));let i=this.pushManager.pipe(b(n=>n.getSubscription()));this.subscription=O(i,this.subscriptionChanges)}requestSubscription(r){if(!this.sw.isEnabled||this.pushManager===null)return Promise.reject(new Error(E));let i={userVisibleOnly:!0},n=this.decodeBase64(r.serverPublicKey.replace(/_/g,"/").replace(/-/g,"+")),a=new Uint8Array(new ArrayBuffer(n.length));for(let s=0;s<n.length;s++)a[s]=n.charCodeAt(s);return i.applicationServerKey=a,this.pushManager.pipe(b(s=>s.subscribe(i)),u(1)).toPromise().then(s=>(this.subscriptionChanges.next(s),s))}unsubscribe(){if(!this.sw.isEnabled)return Promise.reject(new Error(E));let r=i=>{if(i===null)throw new Error("Not subscribed to push notifications.");return i.unsubscribe().then(n=>{if(!n)throw new Error("Unsubscribe failed!");this.subscriptionChanges.next(null)})};return this.subscription.pipe(u(1),b(r)).toPromise()}decodeBase64(r){return atob(r)}};m(e,"\u0275fac",function(i){return new(i||e)(g(f))}),m(e,"\u0275prov",w({token:e,factory:e.\u0275fac}));let t=e;return t})(),me=(()=>{let e=class e{sw;versionUpdates;unrecoverable;get isEnabled(){return this.sw.isEnabled}constructor(r){if(this.sw=r,!r.isEnabled){this.versionUpdates=d,this.unrecoverable=d;return}this.versionUpdates=this.sw.eventsOfType(["VERSION_DETECTED","VERSION_INSTALLATION_FAILED","VERSION_READY","NO_NEW_VERSION_DETECTED"]),this.unrecoverable=this.sw.eventsOfType("UNRECOVERABLE_STATE")}checkForUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(E));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("CHECK_FOR_UPDATES",{nonce:r},r)}activateUpdate(){if(!this.sw.isEnabled)return Promise.reject(new Error(E));let r=this.sw.generateNonce();return this.sw.postMessageWithOperation("ACTIVATE_UPDATE",{nonce:r},r)}};m(e,"\u0275fac",function(i){return new(i||e)(g(f))}),m(e,"\u0275prov",w({token:e,factory:e.\u0275fac}));let t=e;return t})();var ue=new L("");function ve(t,e,o,r){return()=>{if(!(M(r)&&"serviceWorker"in navigator&&o.enabled!==!1))return;let i=t.get(z),n=t.get(A);i.runOutsideAngular(()=>{let s=navigator.serviceWorker,p=()=>{var c;return(c=s.controller)==null?void 0:c.postMessage({action:"INITIALIZE"})};s.addEventListener("controllerchange",p),n.onDestroy(()=>{s.removeEventListener("controllerchange",p)})});let a;if(typeof o.registrationStrategy=="function")a=o.registrationStrategy();else{let[s,...p]=(o.registrationStrategy||"registerWhenStable:30000").split(":");switch(s){case"registerImmediately":a=C(null);break;case"registerWithDelay":a=he(+p[0]||0);break;case"registerWhenStable":let c=D(t.get(A).whenStable());a=p[0]?O(c,he(+p[0])):c;break;default:throw new Error(`Unknown ServiceWorker registration strategy: ${o.registrationStrategy}`)}}i.runOutsideAngular(()=>a.pipe(u(1)).subscribe(()=>navigator.serviceWorker.register(e,{scope:o.scope}).catch(s=>console.error("Service worker registration failed with:",s))))}}function he(t){return C(null).pipe(F(t))}function be(t,e){return new f(M(e)&&t.enabled!==!1?navigator.serviceWorker:void 0)}var y=class{enabled;scope;registrationStrategy};function de(t,e={}){return B([fe,me,{provide:ue,useValue:t},{provide:y,useValue:e},{provide:f,useFactory:be,deps:[y,P]},{provide:K,useFactory:ve,deps:[x,ue,y,P],multi:!0}])}q(le,{providers:[{provide:Y,useClass:ee},ie(),Q(ae,X(J)),de("ngsw-worker.js",{enabled:!_(),registrationStrategy:"registerWhenStable:30000"})]});
