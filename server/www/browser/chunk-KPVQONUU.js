import{a as Ae}from"./chunk-ALQQKJMA.js";import"./chunk-FXPZCA6N.js";import"./chunk-DPZCZV4U.js";import"./chunk-TR4ZIYLD.js";import{a as we,b as Pe,e as _e,l as ke,n as Ce,p as xe,q as Se,r as Be,s as Ee,t as Le,w as Oe}from"./chunk-OWD54O6U.js";import"./chunk-35GUH7F6.js";import"./chunk-PB3TRUU7.js";import"./chunk-HC6MZPB3.js";import"./chunk-YMI2B6JE.js";import"./chunk-5CKRY7ZX.js";import"./chunk-FERD25SW.js";import"./chunk-SYQESB6R.js";import"./chunk-LEIMCQKJ.js";import"./chunk-EI2MQEOZ.js";import"./chunk-MCRJI3T3.js";import"./chunk-HWCR5HWZ.js";import"./chunk-ICJQ63PU.js";import"./chunk-MM5QLNJM.js";import"./chunk-72KDLSWN.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import{a as Te}from"./chunk-2AT3FX7A.js";import{Da as ve,Ea as z,G as ce,aa as de,ba as ue,ea as me,ga as fe,h as se,ia as be,m as le,qa as ge,ra as pe,va as ye,za as he}from"./chunk-SHX6CIJO.js";import{$a as ie,Ja as ee,Pa as te,Wa as N,X as O,_a as ne,ab as re,ba as $,bb as m,ca as T,cb as p,db as P,hb as oe,lb as v,mb as L,pa as K,wb as x,xb as ae,za as A}from"./chunk-DMKK32ZK.js";import"./chunk-Z27GUSSL.js";import"./chunk-7KGURMOZ.js";import{a as $e}from"./chunk-IPDSYFFT.js";import"./chunk-RJYTLPPS.js";import"./chunk-VJIVQHDH.js";import"./chunk-ZKRXQTCG.js";import"./chunk-G3CV3VGG.js";import"./chunk-JX3TYZ34.js";import"./chunk-RUY5SX76.js";import"./chunk-NIOQNOHM.js";import"./chunk-4U6PRYVA.js";import"./chunk-IL4VJRLA.js";import"./chunk-JWIEPCRG.js";import"./chunk-QPVVTFFW.js";import"./chunk-J6ICYO4L.js";import"./chunk-LF5XB4YN.js";import{f as l}from"./chunk-RW4GY4BD.js";var je=$e("EmailComposer");var Qe=t=>{let e=new Map;e.set("web",{name:"web"});let i=t.CapacitorPlatforms||{currentPlatform:{name:"web"},platforms:e},r=(o,s)=>{i.platforms.set(o,s)},n=o=>{i.platforms.has(o)&&(i.currentPlatform=i.platforms.get(o))};return i.addPlatform=r,i.setPlatform=n,i},Xe=t=>t.CapacitorPlatforms=Qe(t),Me=Xe(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),mt=Me.addPlatform,ft=Me.setPlatform;var I=function(t){return t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE",t}(I||{}),j=class extends Error{constructor(e,i,r){super(e),this.message=e,this.code=i,this.data=r}},Ye=t=>{var e,i;return t!=null&&t.androidBridge?"android":!((i=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||i===void 0)&&i.bridge?"ios":"web"},Ze=t=>{var e,i,r,n,o;let s=t.CapacitorCustomPlatform||null,a=t.Capacitor||{},b=a.Plugins=a.Plugins||{},c=t.CapacitorPlatforms,U=()=>s!==null?s.name:Ye(t),S=((e=c==null?void 0:c.currentPlatform)===null||e===void 0?void 0:e.getPlatform)||U,W=()=>S()!=="web",De=((i=c==null?void 0:c.currentPlatform)===null||i===void 0?void 0:i.isNativePlatform)||W,Fe=d=>{let u=R.get(d);return!!(u!=null&&u.platforms.has(S())||X(d))},Ve=((r=c==null?void 0:c.currentPlatform)===null||r===void 0?void 0:r.isPluginAvailable)||Fe,We=d=>{var u;return(u=a.PluginHeaders)===null||u===void 0?void 0:u.find(B=>B.name===d)},X=((n=c==null?void 0:c.currentPlatform)===null||n===void 0?void 0:n.getPluginHeader)||We,Re=d=>t.console.error(d),qe=(d,u,B)=>Promise.reject(`${B} does not have an implementation of "${u}".`),R=new Map,Ge=(d,u={})=>{let B=R.get(d);if(B)return console.warn(`Capacitor plugin "${d}" already registered. Cannot register plugins twice.`),B.proxy;let C=S(),E=X(d),w,Ne=()=>l(void 0,null,function*(){return!w&&C in u?w=typeof u[C]=="function"?w=yield u[C]():w=u[C]:s!==null&&!w&&"web"in u&&(w=typeof u.web=="function"?w=yield u.web():w=u.web),w}),ze=(f,g)=>{var h,_;if(E){let k=E==null?void 0:E.methods.find(y=>g===y.name);if(k)return k.rtype==="promise"?y=>a.nativePromise(d,g.toString(),y):(y,M)=>a.nativeCallback(d,g.toString(),y,M);if(f)return(h=f[g])===null||h===void 0?void 0:h.bind(f)}else{if(f)return(_=f[g])===null||_===void 0?void 0:_.bind(f);throw new j(`"${d}" plugin is not implemented on ${C}`,I.Unimplemented)}},q=f=>{let g,h=(..._)=>{let k=Ne().then(y=>{let M=ze(y,f);if(M){let H=M(..._);return g=H==null?void 0:H.remove,H}else throw new j(`"${d}.${f}()" is not implemented on ${C}`,I.Unimplemented)});return f==="addListener"&&(k.remove=()=>l(void 0,null,function*(){return g()})),k};return h.toString=()=>`${f.toString()}() { [capacitor code] }`,Object.defineProperty(h,"name",{value:f,writable:!1,configurable:!1}),h},Y=q("addListener"),Z=q("removeListener"),Je=(f,g)=>{let h=Y({eventName:f},g),_=()=>l(void 0,null,function*(){let y=yield h;Z({eventName:f,callbackId:y},g)}),k=new Promise(y=>h.then(()=>y({remove:_})));return k.remove=()=>l(void 0,null,function*(){console.warn("Using addListener() without 'await' is deprecated."),yield _()}),k},G=new Proxy({},{get(f,g){switch(g){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return E?Je:Y;case"removeListener":return Z;default:return q(g)}}});return b[d]=G,R.set(d,{name:d,proxy:G,platforms:new Set([...Object.keys(u),...E?[C]:[]])}),G},Ke=((o=c==null?void 0:c.currentPlatform)===null||o===void 0?void 0:o.registerPlugin)||Ge;return a.convertFileSrc||(a.convertFileSrc=d=>d),a.getPlatform=S,a.handleError=Re,a.isNativePlatform=De,a.isPluginAvailable=Ve,a.pluginMethodNoop=qe,a.registerPlugin=Ke,a.Exception=j,a.DEBUG=!!a.DEBUG,a.isLoggingEnabled=!!a.isLoggingEnabled,a.platform=a.getPlatform(),a.isNative=a.isNativePlatform(),a},et=t=>t.Capacitor=Ze(t),D=et(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),V=D.registerPlugin,bt=D.Plugins;var F=class{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,i){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(i);let n=this.windowListeners[e];n&&!n.registered&&this.addWindowListener(n);let o=()=>l(this,null,function*(){return this.removeListener(e,i)}),s=Promise.resolve({remove:o});return Object.defineProperty(s,"remove",{value:()=>l(this,null,function*(){console.warn("Using addListener() without 'await' is deprecated."),yield o()})}),s}removeAllListeners(){return l(this,null,function*(){this.listeners={};for(let e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}})}notifyListeners(e,i){let r=this.listeners[e];r&&r.forEach(n=>n(i))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,i){this.windowListeners[i]={registered:!1,windowEventName:e,pluginEventName:i,handler:r=>{this.notifyListeners(i,r)}}}unimplemented(e="not implemented"){return new D.Exception(e,I.Unimplemented)}unavailable(e="not available"){return new D.Exception(e,I.Unavailable)}removeListener(e,i){return l(this,null,function*(){let r=this.listeners[e];if(!r)return;let n=r.indexOf(i);this.listeners[e].splice(n,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])})}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}};var Ie=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),Ue=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent),J=class extends F{getCookies(){return l(this,null,function*(){let e=document.cookie,i={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[n,o]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");n=Ue(n).trim(),o=Ue(o).trim(),i[n]=o}),i})}setCookie(e){return l(this,null,function*(){try{let i=Ie(e.key),r=Ie(e.value),n=`; expires=${(e.expires||"").replace("expires=","")}`,o=(e.path||"/").replace("path=",""),s=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${i}=${r||""}${n}; path=${o}; ${s};`}catch(i){return Promise.reject(i)}})}deleteCookie(e){return l(this,null,function*(){try{document.cookie=`${e.key}=; Max-Age=0`}catch(i){return Promise.reject(i)}})}clearCookies(){return l(this,null,function*(){try{let e=document.cookie.split(";")||[];for(let i of e)document.cookie=i.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}})}clearAllCookies(){return l(this,null,function*(){try{yield this.clearCookies()}catch(e){return Promise.reject(e)}})}},gt=V("CapacitorCookies",{web:()=>new J}),tt=t=>l(void 0,null,function*(){return new Promise((e,i)=>{let r=new FileReader;r.onload=()=>{let n=r.result;e(n.indexOf(",")>=0?n.split(",")[1]:n)},r.onerror=n=>i(n),r.readAsDataURL(t)})}),nt=(t={})=>{let e=Object.keys(t);return Object.keys(t).map(n=>n.toLocaleLowerCase()).reduce((n,o,s)=>(n[o]=t[e[s]],n),{})},it=(t,e=!0)=>t?Object.entries(t).reduce((r,n)=>{let[o,s]=n,a,b;return Array.isArray(s)?(b="",s.forEach(c=>{a=e?encodeURIComponent(c):c,b+=`${o}=${a}&`}),b.slice(0,-1)):(a=e?encodeURIComponent(s):s,b=`${o}=${a}`),`${r}&${b}`},"").substr(1):null,rt=(t,e={})=>{let i=Object.assign({method:t.method||"GET",headers:t.headers},e),n=nt(t.headers)["content-type"]||"";if(typeof t.data=="string")i.body=t.data;else if(n.includes("application/x-www-form-urlencoded")){let o=new URLSearchParams;for(let[s,a]of Object.entries(t.data||{}))o.set(s,a);i.body=o.toString()}else if(n.includes("multipart/form-data")||t.data instanceof FormData){let o=new FormData;if(t.data instanceof FormData)t.data.forEach((a,b)=>{o.append(b,a)});else for(let a of Object.keys(t.data))o.append(a,t.data[a]);i.body=o;let s=new Headers(i.headers);s.delete("content-type"),i.headers=s}else(n.includes("application/json")||typeof t.data=="object")&&(i.body=JSON.stringify(t.data));return i},Q=class extends F{request(e){return l(this,null,function*(){let i=rt(e,e.webFetchExtra),r=it(e.params,e.shouldEncodeUrlParams),n=r?`${e.url}?${r}`:e.url,o=yield fetch(n,i),s=o.headers.get("content-type")||"",{responseType:a="text"}=o.ok?e:{};s.includes("application/json")&&(a="json");let b,c;switch(a){case"arraybuffer":case"blob":c=yield o.blob(),b=yield tt(c);break;case"json":b=yield o.json();break;case"document":case"text":default:b=yield o.text()}let U={};return o.headers.forEach((S,W)=>{U[W]=S}),{data:b,headers:U,status:o.status,url:o.url}})}get(e){return l(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))})}post(e){return l(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))})}put(e){return l(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))})}patch(e){return l(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))})}delete(e){return l(this,null,function*(){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))})}},pt=V("CapacitorHttp",{web:()=>new Q});var He=V("BubbleNotificationPlugin");var ot=(t,e)=>e.id;function at(t,e){t&1&&P(0,"ion-icon",18)}function st(t,e){t&1&&P(0,"ion-icon",19)}function lt(t,e){if(t&1){let i=oe();m(0,"ion-list")(1,"ion-item")(2,"ion-text"),x(3),p(),m(4,"ion-buttons",12)(5,"ion-button",13),v("click",function(){let n=$(i).$implicit,o=L();return T(o.openDeleteBabyAlert(n))}),P(6,"ion-icon",14),p(),m(7,"ion-button",15),v("click",function(){let n=$(i).$implicit,o=L();return T(o.openBabyAlert(n))}),P(8,"ion-icon",16),p(),m(9,"ion-button",15),v("click",function(){let n=$(i).$implicit,o=L();return T(o.makeMailToBaby(n))}),P(10,"ion-icon",17),p(),m(11,"ion-button",15),v("click",function(){let n=$(i).$implicit,o=L();return T(o.babyService.setActiveBaby(n))}),te(12,at,1,0,"ion-icon",18)(13,st,1,0,"ion-icon",19),p()()()()}if(t&2){let i,r=e.$implicit,n=L();A(3),ae(r.name),A(9),ne(r.id===((i=n.babyService.activeBaby())==null?null:i.id)?12:13)}}var It=(()=>{let e=class e{constructor(){this.babyService=O(Te),this.darkModeService=O(Ae),this.activeBaby=K(null),this.alertController=O(ye),this.router=O(le),this.startOnHistory=K(!1),we({arrowBackOutline:_e,trash:Oe,pencil:ke,shareSocial:Se,star:Ee,starOutline:Le,add:Pe,shareSocialOutline:Be,share:xe,radioButtonOn:Ce})}ionViewWillEnter(){return l(this,null,function*(){console.log("ionViewWillEnter"),this.babyService.refresh();let{value:r}=yield z.get({key:"startOnHistory"});this.startOnHistory.set(r==="true")})}openBabyAlert(r){return l(this,null,function*(){yield(yield this.alertController.create({header:r?"Edit baby":"Make a baby",inputs:[{name:"name",type:"text",placeholder:"Baby name",value:r==null?void 0:r.name}],buttons:[{text:"Make",handler:o=>l(this,null,function*(){this.validateBabyName(o.name)?this.babyService.makeBaby(o.name):yield(yield this.alertController.create({header:"Invalid baby name",message:"Please enter a valid baby name",buttons:[{text:"OK"}]})).present()})},{text:"Cancel",role:"cancel"}]})).present()})}validateBabyName(r){return r.length>0}goBack(){this.router.navigate(["/"])}openDeleteBabyAlert(r){return l(this,null,function*(){yield(yield this.alertController.create({header:"Delete baby",message:"Are you sure you want to delete this baby?",buttons:[{text:"Delete",handler:()=>{this.babyService.deleteBaby(r)}},{text:"Cancel"}]})).present()})}openAddBabyByIdAlert(){return l(this,null,function*(){yield(yield this.alertController.create({header:"Add baby by id",inputs:[{name:"id",type:"text",placeholder:"Baby id"}],buttons:[{text:"Add",handler:n=>this.babyService.addBabyById(n.id)},{text:"Cancel",role:"cancel"}]})).present()})}makeMailToBaby(r){je.open({subject:"Baby Tracker - Add baby to your account",body:`To add ${r.name} to your account, copy the id and add the baby in the settings page. <br> Baby ID: ${r.id}`,isHtml:!0})}toggleStartOnHistory(r){return l(this,null,function*(){let n=r.detail.checked;yield z.set({key:"startOnHistory",value:n.toString()}),this.startOnHistory.set(n)})}showBubbleNotification(){return l(this,null,function*(){var n;yield this.babyService.getActiveBaby();let r=((n=this.babyService.activeBaby())==null?void 0:n.name)||"your baby";yield He.showBubbleNotification({title:"Baby Tracker",content:`Track ${r}'s activities - tap to quickly add new entries!`})})}};e.\u0275fac=function(n){return new(n||e)},e.\u0275cmp=ee({type:e,selectors:[["app-settings"]],decls:25,vars:2,consts:[[3,"fullscreen"],[2,"display","flex","align-items","center","justify-content","space-between"],["fill","clear",3,"click"],["name","arrow-back-outline"],["size","large"],[1,"active-baby-wrapper","ion-padding"],[1,"flex"],["expand","block",3,"click"],["name","add"],["inset","",1,"ion-padding-top","ion-padding-bottom"],["slot","end",3,"ionChange","checked"],[1,"ion-padding-top",3,"click"],["slot","end"],["color","danger",3,"click"],["slot","icon-only","name","trash"],[3,"click"],["slot","icon-only","name","pencil"],["slot","icon-only","name","share-social"],["slot","icon-only","name","star"],["slot","icon-only","name","star-outline"]],template:function(n,o){n&1&&(m(0,"ion-content",0)(1,"div",1)(2,"ion-button",2),v("click",function(){return o.goBack()}),P(3,"ion-icon",3),p(),m(4,"ion-title",4),x(5,"Settings"),p()(),m(6,"div",5),ie(7,lt,14,2,"ion-list",null,ot),m(9,"div",6)(10,"ion-button",7),v("click",function(){return o.openBabyAlert()}),P(11,"ion-icon",8),m(12,"ion-text"),x(13,"add baby"),p()(),m(14,"ion-button",7),v("click",function(){return o.openAddBabyByIdAlert()}),P(15,"ion-icon",8),m(16,"ion-text"),x(17,"add baby by id"),p()()(),m(18,"ion-item",9)(19,"ion-text"),x(20,"Start app on history page"),p(),m(21,"ion-toggle",10),v("ionChange",function(a){return o.toggleStartOnHistory(a)}),p()(),m(22,"ion-button",11),v("click",function(){return o.showBubbleNotification()}),m(23,"ion-text"),x(24,"Show bubble notification"),p()()()()),n&2&&(N("fullscreen",!0),A(7),re(o.babyService.babies()),A(14),N("checked",o.startOnHistory()))},dependencies:[fe,me,pe,se,ce,ge,de,he,ue,be,ve],styles:[".flex[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:10px}"]});let t=e;return t})();export{It as SettingsPage};
