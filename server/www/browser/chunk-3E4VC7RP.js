import{a as c,b as _e}from"./chunk-TR4ZIYLD.js";import{c as ue,h as pe,k as de,o as ce,u as fe,v as he,y as ge,z as W}from"./chunk-OWD54O6U.js";import{a as J}from"./chunk-2AT3FX7A.js";import{A as E,Aa as H,B as O,Ba as K,Ca as G,E as V,G as ae,H as B,Y as se,aa as S,ga as k,h as re,ha as L,pa as j,ra as le,t as g,u as F,v as M,w as D,x as f,ya as me,z as N}from"./chunk-SHX6CIJO.js";import{$a as ie,Ga as T,Ja as v,Pa as A,Wa as b,X as w,_a as te,ab as ne,ba as P,bb as n,ca as z,cb as o,da as Q,db as p,ea as q,hb as R,lb as u,ma as y,mb as C,pa as d,tb as x,ub as I,wb as l,xb as oe,za as $}from"./chunk-DMKK32ZK.js";import{a as X,b as Y,f as ee}from"./chunk-RW4GY4BD.js";var ye=(s,r)=>r.id;function Te(s,r){if(s&1){let _=R();n(0,"ion-button",3),u("click",function(){let e=P(_).$implicit,i=C(2);return z(i.choosenBaby.set(e))}),l(1),o()}if(s&2){let _,t=r.$implicit,e=C(2);b("fill",t.id===((_=e.choosenBaby())==null?null:_.id)?"solid":"outline"),$(),oe(t.name)}}function xe(s,r){if(s&1&&(n(0,"ion-title",0),l(1,"Babies"),o(),n(2,"div",1),ie(3,Te,2,2,"ion-button",2,ye),o()),s&2){let _=C();$(3),ne(_.babyService.babies())}}var h=(()=>{let r=class r{constructor(){this.babyService=w(J),this.choosenBaby=d(void 0)}ngOnInit(){this.choosenBaby.set(this.babyService.activeBaby())}refresh(){this.babyService.refresh(),this.choosenBaby.set(this.babyService.activeBaby())}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v({type:r,selectors:[["app-babies-list"]],decls:1,vars:1,consts:[[1,"ion-padding-top"],[1,"babies","button-container","ion-padding"],[3,"fill"],[3,"click","fill"]],template:function(e,i){e&1&&A(0,xe,5,0),e&2&&te(i.babyService.babies().length>1?0:-1)},dependencies:[S,le],encapsulation:2});let s=r;return s})();var ze=(()=>{let r=class r{formatTime(t,e){var a;let i=e.detail.value.replace(/\D/g,"");i.length>4&&(i=i.slice(0,4)),i.length>=2&&parseInt(i.slice(0,2))>23&&(i="23"+i.slice(2)),i.length>=4&&parseInt(i.slice(2,4))>59&&(i=i.slice(0,2)+"59"),i.length>=3&&(i=i.slice(0,2)+":"+i.slice(2)),(a=this.form.get(t))==null||a.setValue(i,{emitEvent:!1})}clearTime(t){var e;(e=this.form.get(t))==null||e.setValue("",{emitEvent:!1})}initializeForm(t){let e=new Date(t.start),i=new Date(t.end);this.form.patchValue({startTime:`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`,endTime:`${i.getHours().toString().padStart(2,"0")}:${i.getMinutes().toString().padStart(2,"0")}`,note:t.note}),this.id.set(t.id)}saveSleep(){var t,e,i;if(this.form.valid){let a=new Date,m=new Date(a),U=new Date(a),[ve,Se]=this.form.value.startTime.split(":").map(Number),[Ce,we]=this.form.value.endTime.split(":").map(Number);m.setHours(ve),m.setMinutes(Se),U.setHours(Ce),U.setMinutes(we),this.sleepOutput.emit({start:m,end:U,babyId:(e=(t=this.babiesList())==null?void 0:t.choosenBaby())==null?void 0:e.id,id:this.id(),note:(i=this.form.value.note)!=null?i:void 0})}}constructor(){this.form=new D({startTime:new f("",[g.required,g.pattern(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/)]),endTime:new f("",[g.required,g.pattern(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/)]),note:new f("")}),this.babiesList=T(h),this.storageService=w(_e),this.sleepStart=d(void 0),this.sleepEnd=d(void 0),this.sleepOutput=y(),this.id=d(void 0)}reset(){return ee(this,null,function*(){var a;(a=this.babiesList())==null||a.refresh();let t=yield this.storageService.getLastTimer(),e=t.value?new Date(t.value):new Date,i=Date.now()-3*60*60*1e3;e.getTime()<i&&(e=new Date),e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.sleepStart.set(e),this.sleepEnd.set(c()),this.id.set(void 0),this.form.patchValue({startTime:e.toISOString().slice(11,16),endTime:c().toISOString().slice(11,16),note:void 0})})}onSleepStartChange(t){let e=new Date(t.detail.value);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.sleepStart.set(e)}onSleepEndChange(t){let e=new Date(t.detail.value);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.sleepEnd.set(e)}onNoteChange(t){var e;(e=this.form.get("note"))==null||e.setValue(t.detail.value,{emitEvent:!1})}closeModal(){this.sleepOutput.emit(void 0)}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v({type:r,selectors:[["app-sleep-form"]],viewQuery:function(e,i){e&1&&x(i.babiesList,h,5),e&2&&I()},outputs:{sleepOutput:"sleepOutput"},decls:17,vars:1,consts:[[1,"ion-padding",3,"formGroup"],["type","tel","inputmode","numeric","formControlName","startTime","placeholder","HH:mm","maxlength","5",3,"ionInput","ionFocus"],["type","tel","inputmode","numeric","formControlName","endTime","placeholder","HH:mm","maxlength","5",3,"ionInput","ionFocus"],["fill","outline","placeholder","Note",3,"ionInput"],[1,"ion-padding","button-container"],[1,"form-button",3,"click"]],template:function(e,i){e&1&&(n(0,"form",0)(1,"ion-item")(2,"ion-label"),l(3,"Sleep Start"),o(),n(4,"ion-input",1),u("ionInput",function(m){return i.formatTime("startTime",m)})("ionFocus",function(){return i.clearTime("startTime")}),o()(),n(5,"ion-item")(6,"ion-label"),l(7,"Sleep End"),o(),n(8,"ion-input",2),u("ionInput",function(m){return i.formatTime("endTime",m)})("ionFocus",function(){return i.clearTime("endTime")}),o()(),n(9,"ion-item")(10,"ion-textarea",3),u("ionInput",function(m){return i.onNoteChange(m)}),o()(),n(11,"div",4)(12,"ion-button",5),u("click",function(){return i.saveSleep()}),l(13,"Save Sleep"),o(),n(14,"ion-button",5),u("click",function(){return i.closeModal()}),l(15,"Cancel"),o()(),p(16,"app-babies-list"),o()),e&2&&b("formGroup",i.form)},dependencies:[re,ae,N,F,M,V,B,E,O,k,L,S,H,h,G],styles:["ion-input[_ngcontent-%COMP%]{width:80px;--padding-start: 8px;--padding-end: 8px}"]});let s=r;return s})();var Ye=(()=>{let r=class r{constructor(){this.babyService=w(J),this.form=new D({type:new f("both"),time:new f("",[g.required,g.pattern(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/)])}),this.time=d(c()),this.note=d(void 0),this.diaperOutput=y(),this.babiesList=T(h),this.id=d(void 0),this.waterIcon=W,this.solidIcon=de,this.bothIcon=he}reset(){var t;this.form.reset(),this.form.patchValue({type:"both"}),this.time.set(c()),this.note.set(void 0),this.id.set(void 0),(t=this.babiesList())==null||t.refresh(),this.form.patchValue({time:c().toISOString().slice(11,16)})}formatTime(t){var i;let e=t.detail.value.replace(/\D/g,"");e.length>4&&(e=e.slice(0,4)),e.length>=2&&parseInt(e.slice(0,2))>23&&(e="23"+e.slice(2)),e.length>=4&&parseInt(e.slice(2,4))>59&&(e=e.slice(0,2)+"59"),e.length>=3&&(e=e.slice(0,2)+":"+e.slice(2)),(i=this.form.get("time"))==null||i.setValue(e,{emitEvent:!1})}initializeForm(t){console.log(t);let e=new Date(t.time);this.form.patchValue({time:`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`,type:t.type}),this.id.set(t.id),this.note.set(t.note)}saveDiaper(){var t,e;if(this.form.valid){let i=new Date,[a,m]=this.form.value.time.split(":").map(Number);i.setHours(a),i.setMinutes(m),this.diaperOutput.emit({type:this.form.value.type,time:i,note:this.note(),babyId:(e=(t=this.babiesList())==null?void 0:t.choosenBaby())==null?void 0:e.id,id:this.id()})}}cancelDiaper(){this.diaperOutput.emit(void 0)}onDiaperTimeChange(t){let e=new Date(t.detail.value);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.time.set(e)}onNoteChange(t){this.note.set(t.detail.value)}clearTime(){var t;(t=this.form.get("time"))==null||t.setValue("",{emitEvent:!1})}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v({type:r,selectors:[["app-diaper-form"]],viewQuery:function(e,i){e&1&&x(i.babiesList,h,5),e&2&&I()},outputs:{diaperOutput:"diaperOutput"},decls:25,vars:1,consts:[[1,"ion-padding",3,"formGroup"],["type","tel","inputmode","numeric","formControlName","time","placeholder","HH:mm","maxlength","5",3,"ionInput","ionFocus"],["formControlName","type",1,"ion-padding-top"],["value","wet"],[1,"dot","wet"],["value","solid"],[1,"dot","solid"],["value","both"],[1,"dot","both"],["fill","outline","placeholder","Note",3,"ionInput"],[1,"button-container",2,"margin-top","1rem"],[1,"form-button",3,"click"]],template:function(e,i){e&1&&(n(0,"form",0)(1,"ion-item")(2,"ion-label"),l(3,"Diaper Time"),o(),n(4,"ion-input",1),u("ionInput",function(m){return i.formatTime(m)})("ionFocus",function(){return i.clearTime()}),o()(),n(5,"ion-segment",2)(6,"ion-segment-button",3),p(7,"div",4),n(8,"ion-label"),l(9,"Wet"),o()(),n(10,"ion-segment-button",5),p(11,"div",6),n(12,"ion-label"),l(13,"Solid"),o()(),n(14,"ion-segment-button",7),p(15,"div",8),n(16,"ion-label"),l(17,"Both"),o()()(),n(18,"ion-textarea",9),u("ionInput",function(m){return i.onNoteChange(m)}),o(),n(19,"div",10)(20,"ion-button",11),u("click",function(){return i.saveDiaper()}),l(21,"Save Diaper"),o(),n(22,"ion-button",11),u("click",function(){return i.cancelDiaper()}),l(23,"Cancel"),o()(),p(24,"app-babies-list"),o()),e&2&&b("formGroup",i.form)},dependencies:[B,N,F,M,V,E,O,k,L,K,j,S,G,H,h],styles:["ion-input[_ngcontent-%COMP%]{width:80px;--padding-start: 8px;--padding-end: 8px}"]});let s=r;return s})();function Ie(s,r){if(s&1){let _=R();n(0,"ion-datetime",20),u("ionChange",function(e){P(_);let i=C();return z(i.onNursingTimeChange(e))}),o()}if(s&2){let _=C();b("value",_.time().toISOString())}}var st=(()=>{let r=class r{constructor(){this.removeCircleOutline=ce,this.addCircleOutline=ue,this.syncCircleOutline=fe,this.ellipse=pe,this.waterOutline=W,this.water=ge,this.babiesList=T(h),this.nursing=d({type:"both",amount:"medium",time:c()}),this.time=d(c()),this.nursingOutput=y(),this.id=d(void 0),this.form=new D({type:new f("both"),amount:new f("medium"),time:new f("",[g.required,g.pattern(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/)]),note:new f("")})}reset(){var t;(t=this.babiesList())==null||t.refresh(),this.nursing.set({type:"both",amount:"medium",time:c()}),this.time.set(c()),this.id.set(void 0),this.form.patchValue({time:c().toISOString().slice(11,16),type:"both",amount:"medium",note:""})}onTypeChange(t){let e=t.detail.value;this.nursing.update(i=>Y(X({},i),{type:e}))}onAmountChange(t){let e=t.detail.value;this.nursing.update(i=>Y(X({},i),{amount:e}))}onNursingTimeChange(t){let e=new Date(t.detail.value);e.setMinutes(e.getMinutes()-e.getTimezoneOffset()),this.time.set(e)}saveNursing(){var t,e;if(this.form.valid){let i=new Date,[a,m]=this.form.value.time.split(":").map(Number);i.setHours(a),i.setMinutes(m),this.nursingOutput.emit({type:this.form.value.type,amount:this.form.value.amount,time:i,note:this.form.value.note||void 0,babyId:(e=(t=this.babiesList())==null?void 0:t.choosenBaby())==null?void 0:e.id,id:this.id()})}}cancelNursing(){this.nursingOutput.emit(void 0)}initializeForm(t){let e=new Date(t.time);this.form.patchValue({time:`${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}`,type:t.type,amount:t.amount,note:t.note}),this.id.set(t.id)}formatTime(t){var i;let e=t.detail.value.replace(/\D/g,"");e.length>4&&(e=e.slice(0,4)),e.length>=2&&parseInt(e.slice(0,2))>23&&(e="23"+e.slice(2)),e.length>=4&&parseInt(e.slice(2,4))>59&&(e=e.slice(0,2)+"59"),e.length>=3&&(e=e.slice(0,2)+":"+e.slice(2)),(i=this.form.get("time"))==null||i.setValue(e,{emitEvent:!1})}clearTime(){var t;(t=this.form.get("time"))==null||t.setValue("",{emitEvent:!1})}onNoteChange(t){var e;(e=this.form.get("note"))==null||e.setValue(t.detail.value)}};r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=v({type:r,selectors:[["app-nursing-form"]],viewQuery:function(e,i){e&1&&x(i.babiesList,h,5),e&2&&I()},outputs:{nursingOutput:"nursingOutput"},decls:43,vars:2,consts:[[1,"ion-padding",3,"formGroup"],["type","tel","inputmode","numeric","formControlName","time","placeholder","HH:mm","maxlength","5",3,"ionInput","ionFocus"],["formControlName","type",1,"ion-padding-top"],["value","left"],[1,"dot","half"],["value","right"],["value","both"],[1,"dot","full"],["formControlName","amount",1,"ion-padding-top"],["value","a little"],["xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","version","1.1","viewBox","0 0 100 100",1,"droplet","empty"],["d",`M49.015,0.803
                    c-0.133-1.071-1.896-1.071-2.029,0
                    C42.57,36.344,20,43.666,20,68.367   
                    C20,83.627,32.816,96,48,96
                    s28-12.373,28-27.633
                    C76,43.666,53.43,36.344,49.015,0.803z 
                    M44.751,40.09   
                    c-0.297,1.095-0.615,2.223-0.942,3.386
                    c-2.007,7.123-4.281,15.195-4.281,24.537
                    c0,5.055-2.988,6.854-5.784,6.854   
                    c-3.189,0-5.782-2.616-5.782-5.831
                    c0-11.034,5.315-18.243,10.005-24.604
                    c1.469-1.991,2.855-3.873,3.983-5.749   
                    c0.516-0.856,1.903-0.82,2.533,0.029
                    C44.781,39.116,44.879,39.619,44.751,40.09z`],["value","medium"],["xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","version","1.1","viewBox","0 0 100 100",1,"droplet","half"],["value","a lot"],["xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","version","1.1","viewBox","0 0 100 100",1,"droplet","full"],["fill","outline","placeholder","Note",3,"ionInput"],[1,"button-container",2,"margin-top","1rem"],[1,"form-button",3,"click"],[3,"keepContentsMounted"],["id","nursing-time","locale","da-DK",3,"ionChange","value"]],template:function(e,i){e&1&&(n(0,"form",0)(1,"ion-item")(2,"ion-label"),l(3,"Nursing Time"),o(),n(4,"ion-input",1),u("ionInput",function(m){return i.formatTime(m)})("ionFocus",function(){return i.clearTime()}),o()(),n(5,"ion-segment",2)(6,"ion-segment-button",3),p(7,"div",4),n(8,"ion-label"),l(9,"Left"),o()(),n(10,"ion-segment-button",5),p(11,"div",4),n(12,"ion-label"),l(13,"Right"),o()(),n(14,"ion-segment-button",6),p(15,"div",7),n(16,"ion-label"),l(17,"Both"),o()()(),n(18,"ion-segment",8)(19,"ion-segment-button",9),Q(),n(20,"svg",10),p(21,"path",11),o(),q(),n(22,"ion-label"),l(23,"A little"),o()(),n(24,"ion-segment-button",12),Q(),n(25,"svg",13),p(26,"path",11),o(),q(),n(27,"ion-label"),l(28,"Medium"),o()(),n(29,"ion-segment-button",14),Q(),n(30,"svg",15),p(31,"path",11),o(),q(),n(32,"ion-label"),l(33,"A lot"),o()()(),n(34,"ion-textarea",16),u("ionInput",function(m){return i.onNoteChange(m)}),o(),n(35,"div",17)(36,"ion-button",18),u("click",function(){return i.saveNursing()}),l(37,"Save Nursing"),o(),n(38,"ion-button",18),u("click",function(){return i.cancelNursing()}),l(39,"Cancel"),o()(),p(40,"app-babies-list"),o(),n(41,"ion-modal",19),A(42,Ie,1,1,"ng-template"),o()),e&2&&(b("formGroup",i.form),$(41),b("keepContentsMounted",!0))},dependencies:[B,N,F,M,V,E,O,k,L,K,j,S,G,H,se,me,h],styles:[".dot[_ngcontent-%COMP%]{border-radius:50%}svg[_ngcontent-%COMP%]{width:20px;height:20px}.droplet.full[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--ion-color-primary);stroke:var(--ion-color-primary);stroke-width:0}.droplet.half[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--ion-color-primary);fill-opacity:.7}.droplet.empty[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:var(--ion-color-primary);fill-opacity:.2}ion-input[_ngcontent-%COMP%]{width:80px;--padding-start: 8px;--padding-end: 8px}"]});let s=r;return s})();export{ze as a,Ye as b,st as c};
